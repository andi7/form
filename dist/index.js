!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.store=t(require("react")):e.store=t(e.react)}(window,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((n=r(0))&&n.__esModule?n:{default:n}).default.createContext("form");t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Form",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return o.default}});var n=i(r(3)),o=i(r(5));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),i=r(4),u=(n=r(1))&&n.__esModule?n:{default:n};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=function(e){function t(){var e,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];return s(n,(r=n=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),Object.defineProperty(d(n),"state",{configurable:!0,enumerable:!0,writable:!0,value:{initialValues:n.props.initialValues||{},values:n.props.initialValues||{}}}),Object.defineProperty(d(n),"fields",{configurable:!0,enumerable:!0,writable:!0,value:{}}),Object.defineProperty(d(n),"errors",{configurable:!0,enumerable:!0,writable:!0,value:{}}),Object.defineProperty(d(n),"touched",{configurable:!0,enumerable:!0,writable:!0,value:new Set}),Object.defineProperty(d(n),"storeComponent",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return n.fields[e]=t}}),Object.defineProperty(d(n),"updateComponent",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.fields[e]?n.fields[e].forceUpdate():Object.keys(n.fields).forEach(function(t){t.includes(e)&&n.fields[t].forceUpdate()})}}),Object.defineProperty(d(n),"updateAllComponents",{configurable:!0,enumerable:!0,writable:!0,value:function(){Object.keys(n.fields).map(function(e){return n.updateComponent(e)})}}),Object.defineProperty(d(n),"getField",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,i.getPath)(n.state.values,e)}}),Object.defineProperty(d(n),"getFields",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.length>0?e.reduce(function(e,r){var o=t?"".concat(t,".").concat(r):r;return(0,i.setPath)(e,o,n.getField(o)),e},{}):n.state.values}}),Object.defineProperty(d(n),"setField",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,i.clone)(n.state.values),o=(0,i.getPath)(r,e);return new Promise(function(u){o!==t&&((0,i.setPath)(r,e,t),n.touched.add(e),n.setState({values:r},function(){n.updateComponent(e),u(t)}))})}}),Object.defineProperty(d(n),"setFields",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)n.setField(t,e[t])}}),Object.defineProperty(d(n),"resetField",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setField(e,(0,i.getPath)(n.state.initialValues,e)),n.touched.delete(e),n.updateComponent(e)}}),Object.defineProperty(d(n),"resetFields",{configurable:!0,enumerable:!0,writable:!0,value:function(){n.setState({values:n.state.initialValues}),l(n.touched).forEach(function(e){return n.updateComponent(e)}),n.touched.clear()}}),Object.defineProperty(d(n),"validate",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=n.props.schema,t=n.getFields(),r=!1;try{r=e.validateSync(t,{abortEarly:!1})}catch(e){n.errors=e.inner.reduce(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},e,c({},t.path,t.message))},{})}return Object.keys(n.errors).map(function(e){return n.touched.add(e)}),n.updateAllComponents(),!!r}}),Object.defineProperty(d(n),"validateField",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n.props.schema,r=!1;try{r=t.validateSyncAt(e,n.getFields()),n.errors[e]=""}catch(t){n.errors[e]=t.message}return r}}),Object.defineProperty(d(n),"getError",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.errors[e]||""}}),Object.defineProperty(d(n),"API",{configurable:!0,enumerable:!0,writable:!0,value:{_internal:{storeComponent:n.storeComponent,updateComponent:n.updateComponent,schema:n.props.schema},values:function(){return n.getFields()},touched:function(){return l(n.touched)},isTouched:function(e){return n.touched.has(e)},getField:n.getField,getFields:n.getFields,setField:n.setField,setFields:n.setFields,resetField:n.resetField,resetFields:n.resetFields,validate:n.validate,validateField:n.validateField,getError:n.getError}}),r))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props.formApi,t=this.API,r=(t._internal,function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["_internal"]));e&&e(r)}},{key:"render",value:function(){return o.default.createElement(u.default.Provider,{value:this.API},this.props.children)}}])&&f(r.prototype,n),a&&f(r,a),t}();t.default=p},function(e,t,r){var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeRoute=t.getQs=t.decodeQs=t.typeCheck=t.range=t.compose=t.genId=t.clone=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=r(1),a=r(3);var c=function(e){return e?"?"+Object.entries(e).map(function(e){var t=i(e,2),r=t[0],o=t[1],u="object"===(void 0===o?"undefined":n(o))?btoa(JSON.stringify(o)):o;return r+"="+encodeURIComponent(u)}).join("&"):""};t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.genId=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)},t.compose=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},t.range=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=i(t,2),o=n[0],u=n[1];return u?(t=o>u?[u,o]:[o,u],a._range.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))):(0,a._range)(0,o)},t.typeCheck=function(e,t){return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.forEach(function(e,t){var r=e.split("|")[0]||"any";if(!(e.match("optional")&&(0,u.isUndefined)(n[t])||"any"===r||(0,a._getType)(n[t])===r))throw new Error("Type error: param "+t+" must be of type "+r)}),e.apply(void 0,n)}},t.decodeQs=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").slice(1).split("&").reduce(function(e,t){var r=t.split("="),n=i(r,2),u=n[0],a=n[1];return o({},e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},u,decodeURIComponent(a)))},{})},t.getQs=c,t.changeRoute=function(e){var t=window.location,r=""+t.origin+t.pathname+c(e);window.history.pushState({path:r},"",r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isObj=function(e){return!!e&&e instanceof Object},t.isPlainObj=function(e){return!!e&&e.constructor===Object},t.isUndefined=function(e){return void 0===e},t.isArray=function(e){return Array.isArray(e)},t.isString=function(e){return"string"==typeof e},t.isNumber=function(e){return"number"==typeof e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(4);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(5);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=r(7);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var a=r(1);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t._range=function(e,t){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(Array(t-e).keys())).map(function(t){return t+e})},t._getType=function(e){return{}.toString.call(e).match(/\s(\w+)/)[1].toLowerCase()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniq=void 0;var n=r(1);var o=(0,r(0).typeCheck)(function(e,t){return(0,n.isUndefined)(t)?Array.from(new Set(e)):e.reduce(function(e,r){return e.find(function(e){return e[t]===r[t]})?e:[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e),[r])},[])},["array","string|optional"]);t.uniq=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=t.mapKeys=t.getPath=t.setPath=t.deepFindKey=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=r(1),a=(r(0),r(6));function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.deepFindKey=function e(t,r){var n=t&&t[r];if(n)return n;for(var o in t){var u=t[o];if("object"===(void 0===u?"undefined":i(u))){var a=e(u,r);if(a)return a}}},t.setPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];if(!(0,u.isUndefined)(r))for(var n=(0,a.formattedPath)(t).split(".").filter(function(e){return""!==e});n.length>0;){var o=(0,a.matchedKey)(n.shift()).value;0===n.length?e[o]=r:(e[o]||(e[o]=(0,a.matchedKey)(n[0]).match?[]:{}),e=e[o])}},t.getPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,a.formattedPath)(t).replace(/\[(\d+)\]/g,"$1").split(".").reduce(function(e,t){return e?e[t]:void 0},e)},t.mapKeys=function(e,t){return Object.entries(e).reduce(function(e,r){var i=o(r,2),u=i[0],a=i[1];return n({},e,c({},t(a,u),a))},{})},t.mapValues=function(e,t){return Object.entries(e).reduce(function(e,r){var i=o(r,2),u=i[0],a=i[1];return n({},e,c({},u,t(a,u)))},{})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formattedPath=function(e){return e.replace(/\[["'`]([\w\d]+)["'`]\]/g,"$1").split(/(\[\d+\])/).join(".").replace(/\.+/g,".")},t.matchedKey=function(e){var t=e.match(/\[(\d+)\]/);return t&&(e=parseInt(t[1])),{match:t,value:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=void 0;var n=(0,r(0).typeCheck)(function(e){return e.charAt(0).toUpperCase()+e.slice(1)},["string"]);t.capitalize=n}])},e.exports=n()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(0)),i=(n=r(1))&&n.__esModule?n:{default:n};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}var r,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r=t,(n=[{key:"handleChange",value:function(e,t){var r=this.props,n=r.name,o=r.normalize,i=r.onChange,u=r.validate,a=void 0===u||u,l=r.update,f=void 0===l?[]:l,s=t._internal,d=c(t,["_internal"]);o&&(e=o(e)),d.setField(n,e).then(function(){a&&d.validateField(n),s.updateComponent(n),f.map(function(e){return s.updateComponent(e)}),i&&i(e,d)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.name,n=t.render,u=(t.normalize,t.onChange,c(t,["name","render","normalize","onChange"])),l=n;return o.default.createElement(i.default.Consumer,null,function(t){return(0,t._internal.storeComponent)(r,e),o.default.createElement(l,a({},u,{error:t.getError(r),name:r,value:t.getField(r),touched:t.isTouched(r),onChange:function(r){return e.handleChange(r,t)}}))})}}])&&l(r.prototype,n),u&&l(r,u),t}();t.default=s}])});